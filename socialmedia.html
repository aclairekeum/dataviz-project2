
<!DOCTYPE html>
<html>
  
  <head>
    
    <meta charset="utf-8">
    <title>Social Media Viz Demo</title>
    
  </head>
  
  <body>
    
    <svg id="viz" height="500" width="800" style="border: 1px solid grey;">
    </svg>
    
    <script>
      
window.addEventListener("load",run);
      

/*
 * Demo: social media 2013-2014 data
 * 
 * Version charting a single year
 *
 */


function run () {

    var data = getDataRows("age",2013);

    var svg = document.getElementById("viz");

    // get the size of the SVG element
    var height = svg.getAttribute("height");
    var width = svg.getAttribute("width");

    // the namespace for creating SVG elements
    var svgns = "http://www.w3.org/2000/svg";

    // the chart lives in the svg surrounded by a margin of 100px
    var margin = 100;
    var chartHeight = height - 2*margin;
    var chartWidth = width - 2*margin;

    // figure out the width of the bars so that all bars fit and 
    // there is one bar width between them
    var barWidth = chartWidth/(2*data.length-1);

    data.forEach(function(v,i) {
	// compute the height of the bar as a proportion of the 
	// available chartHeight
	var barHeight = chartHeight*v.value/100;
	// figure out where the vetical bar starts
	var yPos = height-margin-barHeight;
	// create bar
	var elt = document.createElementNS(svgns,"rect")
	elt.setAttributeNS(null,"x",margin+i*2*barWidth);
	elt.setAttributeNS(null,"y",yPos);
	elt.setAttributeNS(null,"width",barWidth);
	elt.setAttributeNS(null,"height",barHeight);
	elt.setAttributeNS(null,"fill","blue");
	svg.appendChild(elt);

	// create value text
	elt = document.createElementNS(svgns,"text")
	elt.setAttributeNS(null,"x",margin+i*2*barWidth+barWidth/2);
 	elt.setAttributeNS(null,"y",yPos-20);
	elt.setAttributeNS(null,"dy","0.3em");
	elt.setAttributeNS(null,"text-anchor","middle");
	elt.appendChild(document.createTextNode(v.value+"%"));
	svg.appendChild(elt);

	// create label text
	elt = document.createElementNS(svgns,"text")
	elt.setAttributeNS(null,"x",margin+i*2*barWidth+barWidth/2);
	elt.setAttributeNS(null,"y",margin+chartHeight+50);
	elt.setAttributeNS(null,"dy","0.3em");
	elt.setAttributeNS(null,"text-anchor","middle");
	elt.appendChild(document.createTextNode(v.group));
	svg.appendChild(elt);
    });
}


/* From 
   http://www.pewinternet.org/files/2015/08/Social-Media-Update-2015-FINAL2.pdf
*/


function getDataRows (category,year) {
    var data = [
    { platform: "Messaging", category: "Total", value: "31"},
    { platform: "Messaging", category: "Men", value: "37"},
    { platform: "Messaging", category: "Women", value: "36"},
    { platform: "Messaging", category: "White, Non-Hispanic", value: "34"},
    { platform: "Messaging", category: "Black, Non-Hispanic", value: "N/A*"},
    { platform: "Messaging", category: "Hispanic", value: "N/A*"},
    { platform: "Messaging", category: "18-29", value: "49"},
    { platform: "Messaging", category: "30-49", value: "37"},
    { platform: "Messaging", category: "50+", value: "24"},
    { platform: "Messaging", category: "High School", value: "30"},
    { platform: "Messaging", category: "Some College", value: "34"},
    { platform: "Messaging", category: "College", value: "45"},
    { platform: "Messaging", category: "Less than 50000", value: "38"},
    { platform: "Messaging", category: "More than 50000", value: "36"},
    { platform: "Messaging", category: "Urban", value: "42"},
    { platform: "Messaging", category: "Suburban", value: "37"},
    { platform: "Messaging", category: "Rural", value: "22"},

    { platform: "Messaging Autodelete", category: "Total", value: "17"},
    { platform: "Messaging Autodelete", category: "Men", value: "17"},
    { platform: "Messaging Autodelete", category: "Women", value: "18"},
    { platform: "Messaging Autodelete", category: "White, Non-Hispanic", value: "18"},
    { platform: "Messaging Autodelete", category: "Black, Non-Hispanic", value: "N/A*"},
    { platform: "Messaging Autodelete", category: "Hispanic", value: "N/A*"},
    { platform: "Messaging Autodelete", category: "18-29", value: "41"},
    { platform: "Messaging Autodelete", category: "30-49", value: "11"},
    { platform: "Messaging Autodelete", category: "50+", value: "4"},
    { platform: "Messaging Autodelete", category: "High School", value: "19"},
    { platform: "Messaging Autodelete", category: "Some College", value: "20"},
    { platform: "Messaging Autodelete", category: "College", value: "13"},
    { platform: "Messaging Autodelete", category: "Less than 50000", value: "18"},
    { platform: "Messaging Autodelete", category: "More than 50000", value: "17"},
    { platform: "Messaging Autodelete", category: "Urban", value: "22"},
    { platform: "Messaging Autodelete", category: "Suburban", value: "15"},
    { platform: "Messaging Autodelete", category: "Rural", value: "13"},

    { platform: "Discussion Forums", category: "Total", value: "15"},
    { platform: "Discussion Forums", category: "Men", value: "20"},
    { platform: "Discussion Forums", category: "Women", value: "11"},
    { platform: "Discussion Forums", category: "White, Non-Hispanic", value: "16"},
    { platform: "Discussion Forums", category: "Black, Non-Hispanic", value: "13"},
    { platform: "Discussion Forums", category: "Hispanic", value: "17"},
    { platform: "Discussion Forums", category: "18-29", value: "23"},
    { platform: "Discussion Forums", category: "30-49", value: "14"},
    { platform: "Discussion Forums", category: "50-64", value: "13"},
    { platform: "Discussion Forums", category: "65+", value: "8"},
    { platform: "Discussion Forums", category: "High School", value: "11"},
    { platform: "Discussion Forums", category: "Some College", value: "20"},
    { platform: "Discussion Forums", category: "College", value: "15"},
    { platform: "Discussion Forums", category: "Less than 30000", value: "20"},
    { platform: "Discussion Forums", category: "30000-49999", value: "12"},
    { platform: "Discussion Forums", category: "50000-74999", value: "14"},
    { platform: "Discussion Forums", category: "More than 75000", value: "18"},
    { platform: "Discussion Forums", category: "Urban", value: "19"},
    { platform: "Discussion Forums", category: "Suburban", value: "14"},
    { platform: "Discussion Forums", category: "Rural", value: "10"},

    { platform: "Tumblr", category: "Total", value: "10"},
    { platform: "Tumblr", category: "Men", value: "10"},
    { platform: "Tumblr", category: "Women", value: "11"},
    { platform: "Tumblr", category: "White, Non-Hispanic", value: "9"},
    { platform: "Tumblr", category: "Black, Non-Hispanic", value: "15"},
    { platform: "Tumblr", category: "Hispanic", value: "15"},
    { platform: "Tumblr", category: "18-29", value: "20"},
    { platform: "Tumblr", category: "30-49", value: "11"},
    { platform: "Tumblr", category: "50-64", value: "5"},
    { platform: "Tumblr", category: "65+", value: "2"},
    { platform: "Tumblr", category: "High School", value: "10"},
    { platform: "Tumblr", category: "Some College", value: "13"},
    { platform: "Tumblr", category: "College", value: "9"},
    { platform: "Tumblr", category: "Less than 30000", value: "16"},
    { platform: "Tumblr", category: "30000-49999", value: "8"},
    { platform: "Tumblr", category: "50000-74999", value: "4"},
    { platform: "Tumblr", category: "More than 75000", value: "11"},
    { platform: "Tumblr", category: "Urban", value: "16"},
    { platform: "Tumblr", category: "Suburban", value: "8"},
    { platform: "Tumblr", category: "Rural", value: "3"},

    { platform: "Facebook", category: "Total", value: "72"},
    { platform: "Facebook", category: "Men", value: "66"},
    { platform: "Facebook", category: "Women", value: "77"},
    { platform: "Facebook", category: "White, Non-Hispanic", value: "70"},
    { platform: "Facebook", category: "Black, Non-Hispanic", value: "67"},
    { platform: "Facebook", category: "Hispanic", value: "75"},
    { platform: "Facebook", category: "18-29", value: "82"},
    { platform: "Facebook", category: "30-49", value: "79"},
    { platform: "Facebook", category: "50-64", value: "64"},
    { platform: "Facebook", category: "65+", value: "48"},
    { platform: "Facebook", category: "High School", value: "71"},
    { platform: "Facebook", category: "Some College", value: "72"},
    { platform: "Facebook", category: "College", value: "72"},
    { platform: "Facebook", category: "Less than 30000", value: "73"},
    { platform: "Facebook", category: "30000-49999", value: "72"},
    { platform: "Facebook", category: "50000-74999", value: "66"},
    { platform: "Facebook", category: "More than 75000", value: "78"},
    { platform: "Facebook", category: "Urban", value: "74"},
    { platform: "Facebook", category: "Suburban", value: "72"},
    { platform: "Facebook", category: "Rural", value: "67"},

    { platform: "Pinterest", category: "Total", value: "31"},
    { platform: "Pinterest", category: "Men", value: "16"},
    { platform: "Pinterest", category: "Women", value: "44"},
    { platform: "Pinterest", category: "White, Non-Hispanic", value: "32"},
    { platform: "Pinterest", category: "Black, Non-Hispanic", value: "23"},
    { platform: "Pinterest", category: "Hispanic", value: "32"},
    { platform: "Pinterest", category: "18-29", value: "37"},
    { platform: "Pinterest", category: "30-49", value: "36"},
    { platform: "Pinterest", category: "50-64", value: "24"},
    { platform: "Pinterest", category: "65+", value: "16"},
    { platform: "Pinterest", category: "High School", value: "25"},
    { platform: "Pinterest", category: "Some College", value: "37"},
    { platform: "Pinterest", category: "College", value: "31"},
    { platform: "Pinterest", category: "Less than 30000", value: "24"},
    { platform: "Pinterest", category: "30000-49999", value: "37"},
    { platform: "Pinterest", category: "50000-74999", value: "41"},
    { platform: "Pinterest", category: "More than 75000", value: "30"},
    { platform: "Pinterest", category: "Urban", value: "26"},
    { platform: "Pinterest", category: "Suburban", value: "34"},
    { platform: "Pinterest", category: "Rural", value: "31"},

    { platform: "Instagram", category: "Total", value: "28"},
    { platform: "Instagram", category: "Men", value: "24"},
    { platform: "Instagram", category: "Women", value: "31"},
    { platform: "Instagram", category: "White, Non-Hispanic", value: "21"},
    { platform: "Instagram", category: "Black, Non-Hispanic", value: "47"},
    { platform: "Instagram", category: "Hispanic", value: "38"},
    { platform: "Instagram", category: "18-29", value: "55"},
    { platform: "Instagram", category: "30-49", value: "28"},
    { platform: "Instagram", category: "50-64", value: "11"},
    { platform: "Instagram", category: "65+", value: "4"},
    { platform: "Instagram", category: "High School", value: "25"},
    { platform: "Instagram", category: "Some College", value: "32"},
    { platform: "Instagram", category: "College", value: "26"},
    { platform: "Instagram", category: "Less than 30000", value: "26"},
    { platform: "Instagram", category: "30000-49999", value: "27"},
    { platform: "Instagram", category: "50000-74999", value: "30"},
    { platform: "Instagram", category: "More than 75000", value: "26"},
    { platform: "Instagram", category: "Urban", value: "32"},
    { platform: "Instagram", category: "Suburban", value: "28"},
    { platform: "Instagram", category: "Rural", value: "18"},

    { platform: "LinkedIn", category: "Total", value: "25"},
    { platform: "LinkedIn", category: "Men", value: "26"},
    { platform: "LinkedIn", category: "Women", value: "25"},
    { platform: "LinkedIn", category: "White, Non-Hispanic", value: "26"},
    { platform: "LinkedIn", category: "Black, Non-Hispanic", value: "22"},
    { platform: "LinkedIn", category: "Hispanic", value: "22"},
    { platform: "LinkedIn", category: "18-29", value: "22"},
    { platform: "LinkedIn", category: "30-49", value: "32"},
    { platform: "LinkedIn", category: "50-64", value: "26"},
    { platform: "LinkedIn", category: "65+", value: "12"},
    { platform: "LinkedIn", category: "High School", value: "9"},
    { platform: "LinkedIn", category: "Some College", value: "25"},
    { platform: "LinkedIn", category: "College", value: "46"},
    { platform: "LinkedIn", category: "Less than 30000", value: "17"},
    { platform: "LinkedIn", category: "30000-49999", value: "21"},
    { platform: "LinkedIn", category: "50000-74999", value: "32"},
    { platform: "LinkedIn", category: "More than 75000", value: "41"},
    { platform: "LinkedIn", category: "Employed", value: "32"},
    { platform: "LinkedIn", category: "Not Employed", value: "14"},
    { platform: "LinkedIn", category: "Urban", value: "30"},
    { platform: "LinkedIn", category: "Suburban", value: "26"},
    { platform: "LinkedIn", category: "Rural", value: "12"},

    { platform: "Twitter", category: "Total", value: "23"},
    { platform: "Twitter", category: "Men", value: "25"},
    { platform: "Twitter", category: "Women", value: "21"},
    { platform: "Twitter", category: "White, Non-Hispanic", value: "20"},
    { platform: "Twitter", category: "Black, Non-Hispanic", value: "28"},
    { platform: "Twitter", category: "Hispanic", value: "28"},
    { platform: "Twitter", category: "18-29", value: "32"},
    { platform: "Twitter", category: "30-49", value: "29"},
    { platform: "Twitter", category: "50-64", value: "13"},
    { platform: "Twitter", category: "65+", value: "6"},
    { platform: "Twitter", category: "High School", value: "19"},
    { platform: "Twitter", category: "Some College", value: "23"},
    { platform: "Twitter", category: "College", value: "27"},
    { platform: "Twitter", category: "Less than 30000", value: "21"},
    { platform: "Twitter", category: "30000-49999", value: "19"},
    { platform: "Twitter", category: "50000-74999", value: "25"},
    { platform: "Twitter", category: "More than 75000", value: "26"},
    { platform: "Twitter", category: "Urban", value: "30"},
    { platform: "Twitter", category: "Suburban", value: "21"},
    { platform: "Twitter", category: "Rural", value: "15"}
    ];
    
    return data.filter(function(row) {
	return (row.category===category && row.year===year) ; });
}
      
    </script>
    
  </body>
  
</html>
