
<!DOCTYPE html>
<html>
  
  <head>
    
    <meta charset="utf-8">

    <title>Data Viz Project 2</title>

     <!-- load D3 library -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>


  </head>
  
  <body>
    
    <svg id="viz" height="500" width="800" style="border: 1px solid grey;">
    </svg>
    

    <script>
      
window.addEventListener("load",run);

function run () {
    var data = getDataRows("Facebook","Gender");

    var svg = d3.select("#viz");

    // get the size of the SVG element
    var height = svg.attr("height");
    var width = svg.attr("width");

    // the namespace for creating SVG elements
    var svgns = "http://www.w3.org/2000/svg";

    // the chart lives in the svg surrounded by a margin of 100px
    var margin = 50;
    var chartHeight = height - 2*margin;
    var chartWidth = width - 2*margin;

    // Get the outer radius of each donut
    var radius = 0;
    if ((chartWidth/data.length - margin/2) < chartHeight) {
    	radius = chartWidth/(2*data.length) - margin/2;
    }
    else {
    	radius = chartHeight/2;
    }
    var centery = margin + chartHeight/2;
    //TODO ADD LABELS
    data.forEach(function(v,i){
	    var centerx = margin + (2*i + 1)*chartWidth/(2*data.length);
    	var users = d3.svg.arc()
	    	.innerRadius(radius/2)
	    	.outerRadius(radius)
	    	.startAngle(0)
	    	.endAngle(v.value/100*2*Math.PI);

	    svg.append("path")
    		.attr("d", users)
    		.attr("transform", "translate(" + centerx + "," + centery + ")")
    		.style("fill", "green");

    	var nonusers = d3.svg.arc()
	    	.innerRadius(radius/2)
	    	.outerRadius(radius)
	    	.startAngle(v.value/100*2*Math.PI)
	    	.endAngle(2*Math.PI);

	    svg.append("path")
    		.attr("d", nonusers)
    		.attr("transform", "translate(" + centerx + "," + centery + ")")
    		.style("fill", "blue");


    });
}

function createStackedBar(data) {


}

/* From 
   http://www.pewinternet.org/files/2015/08/Social-Media-Update-2015-FINAL2.pdf
*/


function getDataRows (platform,category) {
    var data = [
    { platform: "Facebook", category: "Total", type: "Total", value: "72"},
    { platform: "Facebook", category: "Gender", type: "Men", value: "66"},
    { platform: "Facebook", category: "Gender", type: "Women", value: "77"},
    { platform: "Facebook", category: "Race", type: "White, Non-Hispanic", value: "70"},
    { platform: "Facebook", category: "Race", type: "Black, Non-Hispanic", value: "67"},
    { platform: "Facebook", category: "Race", type: "Hispanic", value: "75"},
    { platform: "Facebook", category: "Age", type: "18-29", value: "82"},
    { platform: "Facebook", category: "Age", type: "30-49", value: "79"},
    { platform: "Facebook", category: "Age", type: "50-64", value: "64"},
    { platform: "Facebook", category: "Age", type: "65+", value: "48"},
    { platform: "Facebook", category: "Education", type: "High School", value: "71"},
    { platform: "Facebook", category: "Education", type: "Some College", value: "72"},
    { platform: "Facebook", category: "Education", type: "College", value: "72"},
    { platform: "Facebook", category: "Income", type: "Less than 30000", value: "73"},
    { platform: "Facebook", category: "Income", type: "30000-49999", value: "72"},
    { platform: "Facebook", category: "Income", type: "50000-74999", value: "66"},
    { platform: "Facebook", category: "Income", type: "More than 75000", value: "78"},
    { platform: "Facebook", category: "Living", type: "Urban", value: "74"},
    { platform: "Facebook", category: "Living", type: "Suburban", value: "72"},
    { platform: "Facebook", category: "Living", type: "Rural", value: "67"},

    { platform: "Pinterest", category: "Total", type: "Total", value: "31"},
    { platform: "Pinterest", category: "Gender", type: "Men", value: "16"},
    { platform: "Pinterest", category: "Gender", type: "Women", value: "44"},
    { platform: "Pinterest", category: "Race", type: "White, Non-Hispanic", value: "32"},
    { platform: "Pinterest", category: "Race", type: "Black, Non-Hispanic", value: "23"},
    { platform: "Pinterest", category: "Race", type: "Hispanic", value: "32"},
    { platform: "Pinterest", category: "Age", type: "18-29", value: "37"},
    { platform: "Pinterest", category: "Age", type: "30-49", value: "36"},
    { platform: "Pinterest", category: "Age", type: "50-64", value: "24"},
    { platform: "Pinterest", category: "Age", type: "65+", value: "16"},
    { platform: "Pinterest", category: "Education", type: "High School", value: "25"},
    { platform: "Pinterest", category: "Education", type: "Some College", value: "37"},
    { platform: "Pinterest", category: "Education", type: "College", value: "31"},
    { platform: "Pinterest", category: "Income", type: "Less than 30000", value: "24"},
    { platform: "Pinterest", category: "Income", type: "30000-49999", value: "37"},
    { platform: "Pinterest", category: "Income", type: "50000-74999", value: "41"},
    { platform: "Pinterest", category: "Income", type: "More than 75000", value: "30"},
    { platform: "Pinterest", category: "Living", type: "Urban", value: "26"},
    { platform: "Pinterest", category: "Living", type: "Suburban", value: "34"},
    { platform: "Pinterest", category: "Living", type: "Rural", value: "31"},

    { platform: "Instagram", category: "Total", type: "Total", value: "28"},
    { platform: "Instagram", category: "Gender", type: "Men", value: "24"},
    { platform: "Instagram", category: "Gender", type: "Women", value: "31"},
    { platform: "Instagram", category: "Race", type: "White, Non-Hispanic", value: "21"},
    { platform: "Instagram", category: "Race", type: "Black, Non-Hispanic", value: "47"},
    { platform: "Instagram", category: "Race", type: "Hispanic", value: "38"},
    { platform: "Instagram", category: "Age", type: "18-29", value: "55"},
    { platform: "Instagram", category: "Age", type: "30-49", value: "28"},
    { platform: "Instagram", category: "Age", type: "50-64", value: "11"},
    { platform: "Instagram", category: "Age", type: "65+", value: "4"},
    { platform: "Instagram", category: "Education", type: "High School", value: "25"},
    { platform: "Instagram", category: "Education", type: "Some College", value: "32"},
    { platform: "Instagram", category: "Education", type: "College", value: "26"},
    { platform: "Instagram", category: "Income", type: "Less than 30000", value: "26"},
    { platform: "Instagram", category: "Income", type: "30000-49999", value: "27"},
    { platform: "Instagram", category: "Income", type: "50000-74999", value: "30"},
    { platform: "Instagram", category: "Income", type: "More than 75000", value: "26"},
    { platform: "Instagram", category: "Living", type: "Urban", value: "32"},
    { platform: "Instagram", category: "Living", type: "Suburban", value: "28"},
    { platform: "Instagram", category: "Living", type: "Rural", value: "18"},

    { platform: "LinkedIn", category: "Total", type:"Total", value: "25"},
    { platform: "LinkedIn", category: "Gender", type:"Men", value: "26"},
    { platform: "LinkedIn", category: "Gender", type:"Women", value: "25"},
    { platform: "LinkedIn", category: "Race", type: "White, Non-Hispanic", value: "26"},
    { platform: "LinkedIn", category: "Race", type: "Black, Non-Hispanic", value: "22"},
    { platform: "LinkedIn", category: "Race", type: "Hispanic", value: "22"},
    { platform: "LinkedIn", category: "Age", type:"18-29", value: "22"},
    { platform: "LinkedIn", category: "Age", type:"30-49", value: "32"},
    { platform: "LinkedIn", category: "Age", type:"50-64", value: "26"},
    { platform: "LinkedIn", category: "Age", type:"65+", value: "12"},
    { platform: "LinkedIn", category: "Education", type:"High School", value: "9"},
    { platform: "LinkedIn", category: "Education", type:"Some College", value: "25"},
    { platform: "LinkedIn", category: "Education", type:"College", value: "46"},
    { platform: "LinkedIn", category: "Income", type:"Less than 30000", value: "17"},
    { platform: "LinkedIn", category: "Income", type:"30000-49999", value: "21"},
    { platform: "LinkedIn", category: "Income", type:"50000-74999", value: "32"},
    { platform: "LinkedIn", category: "Income", type:"More than 75000", value: "41"},
    { platform: "LinkedIn", category: "Employment", type:"Employed", value: "32"},
    { platform: "LinkedIn", category: "Employment", type:"Not Employed", value: "14"},
    { platform: "LinkedIn", category: "Living", type:"Urban", value: "30"},
    { platform: "LinkedIn", category: "Living", type:"Suburban", value: "26"},
    { platform: "LinkedIn", category: "Living", type:"Rural", value: "12"},

    { platform: "Twitter", category: "Total", type:"Total", value: "23"},
    { platform: "Twitter", category: "Gender", type: "Men", value: "25"},
    { platform: "Twitter", category: "Gender", type:"Women", value: "21"},
    { platform: "Twitter", category: "Race", type: "White, Non-Hispanic", value: "20"},
    { platform: "Twitter", category: "Race", type: "Black, Non-Hispanic", value: "28"},
    { platform: "Twitter", category: "Race", type: "Hispanic", value: "28"},
    { platform: "Twitter", category: "Age", type:"18-29", value: "32"},
    { platform: "Twitter", category: "Age", type:"30-49", value: "29"},
    { platform: "Twitter", category: "Age", type:"50-64", value: "13"},
    { platform: "Twitter", category: "Age", type:"65+", value: "6"},
    { platform: "Twitter", category: "Education", type:"High School", value: "19"},
    { platform: "Twitter", category: "Education", type:"Some College", value: "23"},
    { platform: "Twitter", category: "Education", type:"College", value: "27"},
    { platform: "Twitter", category: "Income", type:"Less than 30000", value: "21"},
    { platform: "Twitter", category: "Income", type:"30000-49999", value: "19"},
    { platform: "Twitter", category: "Income", type:"50000-74999", value: "25"},
    { platform: "Twitter", category: "Income", type:"More than 75000", value: "26"},
    { platform: "Twitter", category: "Living", type:"Urban", value: "30"},
    { platform: "Twitter", category: "Living", type:"Suburban", value: "21"},
    { platform: "Twitter", category: "Living", type:"Rural", value: "15"}
    ];
    
    return data.filter(function(row) {
	return (row.platform===platform && row.category===category) ; });
}
      
    </script>
    
  </body>
  
</html>
